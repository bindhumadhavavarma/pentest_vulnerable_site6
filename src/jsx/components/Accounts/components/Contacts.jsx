import React, { useState } from 'react';
import { Link } from 'react-router-dom';
import { ScaleLoader } from 'react-spinners';
import Info from './Info';

const Contacts = (props) => {
	const [deactiveAccountsKey, setDeActiveAccountsKey] = useState('');
	const [infoaccount, setInfoAccount] = useState(null)

	return (
		<>
			<div className="row">
				{infoaccount == null ? null : (
					<div className='card'>
						<div className='card-header'>
							<div className='card-title'>Account Info<button className='btn btn-cross' onClick={() => setInfoAccount(null)}><i class="fas fa-times"></i></button></div>

						</div>
						<div className='card-body'>
							<Info user={infoaccount}></Info>
						</div>
					</div>
				)}
				<div className="col-xl-12" >

					<div className='card'>
						<div className='card-header'>
							<div className='card-title'>Accounts<button className='btn btn-refresh' onClick={props.fetchAccountsData}><i class="fas fa-sync-alt"></i></button></div>
							<div className="header__search ml-auto">
								<input type="text" className="header__input" placeholder="Search" onChange={(e) => { setDeActiveAccountsKey(e.target.value) }} />
								<i class="fas fa-search" ></i>
							</div>
						</div>
						<div className='card-body' style={{ "height": "800px" }}>
							<div className="table-responsive recentOrderTable row" style={{ height: "100%" }}>
								{(props.accountsData == null || props.isLoading) ? <ScaleLoader cssOverride={{ "display": "flex", "justifyContent": "center", "alignItems": "center" }} /> : props.accountsData.users.filter(account => account.user_name.includes(deactiveAccountsKey)).filter(account => account.status != 1).map((account, index) => (
									<div className="col-md-6 col-sm-12 items" key={index}>
										<div className="card contact-bx item-content" style={{ height: "fit-content" }}>
											<div className="card-header border-0">
											</div>
											<div className="card-body user-profile">
												<div className="image-bx">
													<img className="rounded-circle" src={"https://ui-avatars.com/api/?name=" + account.user_name + "&background=random&color=000000&format=svg"} width={20} alt="" />
												</div>
												<div className="media-body user-meta-info">
													<h6 className="fs-18 font-w600 my-1">{account.user_name}</h6>
													<p className="fs-14 mb-3 user-work">{account.email}</p>
													<ul>
														<li><button className="btn btn-primary tp-btn sharp" onClick={() => setInfoAccount(account)}><i class="fas fa-info"></i></button></li>
													</ul>
												</div>
											</div>
										</div>
									</div>
								))}
							</div>
						</div>
					</div>

				</div>
			</div>
		</>
	)
}
export default Contacts;